(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{707:function(e,t,n){Promise.resolve().then(n.bind(n,2001))},9649:function(e,t,n){"use strict";n.d(t,{H:function(){return l},a:function(){return u}});var a=n(7437),s=n(2265);let r=[{username:"admin",password:"admin123",role:"admin"},{username:"user",password:"user123",role:"user"}],i=(0,s.createContext)();function l(e){let{children:t}=e,[n,l]=(0,s.useState)(null);return(0,a.jsx)(i.Provider,{value:{user:n,login:(e,t)=>{let n=r.find(n=>n.username===e&&n.password===t);return!!n&&(l(n),!0)},logout:()=>{l(null)}},children:t})}let u=()=>(0,s.useContext)(i)},2001:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(7437),s=n(2265),r=n(9649);function i(e){let{onAddBook:t}=e,[n,r]=(0,s.useState)({Title:"",Authors:"",Publisher:"",Year:""});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(n),r({Title:"",Authors:"",Publisher:"",Year:""})},children:[(0,a.jsx)("input",{type:"text",placeholder:"Title",value:n.Title,onChange:e=>r({...n,Title:e.target.value}),required:!0}),(0,a.jsx)("input",{type:"text",placeholder:"Authors",value:n.Authors,onChange:e=>r({...n,Authors:e.target.value}),required:!0}),(0,a.jsx)("input",{type:"text",placeholder:"Publisher",value:n.Publisher,onChange:e=>r({...n,Publisher:e.target.value}),required:!0}),(0,a.jsx)("input",{type:"number",placeholder:"Year",value:n.Year,onChange:e=>r({...n,Year:e.target.value}),required:!0}),(0,a.jsx)("button",{type:"submit",children:"Add Book"})]})}function l(e){let{books:t,onDeleteBook:n,onUpdateBook:r,isAdmin:i}=e,[l,u]=(0,s.useState)(null),o=e=>{u(e)},c=()=>{r(l),u(null)};return(0,a.jsxs)("div",{className:"book-list",children:[(0,a.jsx)("h2",{children:"Books"}),t.map(e=>(0,a.jsx)("div",{className:"book-item card",children:(0,a.jsx)("div",{className:"card-body",children:l&&l.Title===e.Title?(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{value:l.Title,onChange:e=>u({...l,Title:e.target.value}),className:"input"}),(0,a.jsx)("input",{value:l.Authors,onChange:e=>u({...l,Authors:e.target.value}),className:"input"}),(0,a.jsx)("input",{value:l.Publisher,onChange:e=>u({...l,Publisher:e.target.value}),className:"input"}),(0,a.jsx)("input",{value:l.Year,onChange:e=>u({...l,Year:e.target.value}),className:"input"}),(0,a.jsx)("button",{onClick:c,className:"btn btn-primary",children:"Save"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:e.Title}),(0,a.jsxs)("p",{children:["Authors: ",e.Authors]}),(0,a.jsxs)("p",{children:["Publisher: ",e.Publisher]}),(0,a.jsxs)("p",{children:["Year: ",e.Year]}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>o(e),className:"btn btn-secondary",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>n(e.Title),className:"btn btn-danger",children:"Delete"})]})]})})},e.Title))]})}function u(){let[e,t]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),{login:l}=(0,r.a)();return(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),l(e,n)||alert("Invalid credentials")},className:"login-form",children:[(0,a.jsx)("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value),required:!0,className:"input"}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:n,onChange:e=>i(e.target.value),required:!0,className:"input"}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})}function o(){let[e,t]=(0,s.useState)([]),{user:n,logout:o}=(0,r.a)();(0,s.useEffect)(()=>{c()},[]);let c=async()=>{let e=await fetch("/api/books");t(await e.json())},d=async e=>{await fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),c()},h=async e=>{await fetch("/api/books",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})}),c()},p=async e=>{await fetch("/api/books",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),c()};return(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h1",{className:"title",children:"Library Management"})}),(0,a.jsx)("div",{className:"card-body",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Welcome, ",n.username,"!"]}),(0,a.jsx)("button",{onClick:o,className:"btn btn-secondary",children:"Logout"}),"admin"===n.role&&(0,a.jsx)(i,{onAddBook:d}),(0,a.jsx)(l,{books:e,onDeleteBook:h,onUpdateBook:p,isAdmin:"admin"===n.role})]}):(0,a.jsx)(u,{})})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=707)}),_N_E=e.O()}]);